// Generated by CoffeeScript 1.9.3
var db, getDeletedDoc;

db = require('../helpers/db_connect_helper').db_connect();

getDeletedDoc = function(doc) {
  return {
    _id: doc._id,
    _rev: doc._rev,
    _deleted: true,
    docType: doc.docType,
    binary: doc.binary
  };
};

exports.remove = (function(_this) {
  return function(doc, callback) {
    var deletedDoc;
    deletedDoc = getDeletedDoc(doc);
    return db.save(doc._id, deletedDoc, callback);
  };
})(this);

exports.removeAll = (function(_this) {
  return function(docs, callback) {
    var deletedDocs, doc, i, len;
    console.log(docs);
    deletedDocs = [];
    for (i = 0, len = docs.length; i < len; i++) {
      doc = docs[i];
      if (doc.doc != null) {
        doc = doc.doc;
      } else {
        doc = doc.value;
      }
      console.log(doc);
      deletedDocs.push(getDeletedDoc(doc));
    }
    return db.save(deletedDocs, callback);
  };
})(this);
